import streamlit as st
from typing import List, Tuple, Dict, Callable

st.title('A* Search')
st.header('Taylor Hawks')



#global constants
WIDTH = 8
HEIGHT = 8
COSTS  = { 'ğŸŒ¾': 1, 'ğŸŒ²': 3, 'â›°': 5, 'ğŸŠ': 7}
MOVES = [(-1,0),(0,-1),(1,0),(0,1)]
TERRAIN_OPTIONS = [ 'ğŸŒ¾','ğŸŒ²','â›°','ğŸŠ','ğŸŒ‹']
HEURISTIC_OPTIONS = ['Next Move', 'Manhattan Distance', 'Euclidean Distance']

#small world is the default map
small_world = [
    ['ğŸŒ¾', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²'],
    ['ğŸŒ¾', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²'],
    ['ğŸŒ¾', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²'],
    ['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
    ['ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ¾'],
    ['ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ¾'],
    ['ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ¾']
]

full_world = [
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'â›°'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'ğŸŒ¾'],
['ğŸŒ¾', 'â›°', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'ğŸŒ‹', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'â›°', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŒ¾', 'â›°', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ¾', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'ğŸŒ‹', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'ğŸŒ²', 'ğŸŒ²', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ‹', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'â›°', 'â›°', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'ğŸŒ‹', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŒ¾', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ'],
['ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ¾', 'ğŸŒ‹', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ²', 'ğŸŒ²', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ'],
['ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ'],
['ğŸŒ¾', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'â›°', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ'],
['â›°', 'ğŸŒ‹', 'â›°', 'â›°', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ¾', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'â›°', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ'],
['â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'â›°', 'â›°', 'â›°', 'â›°', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŒ‹', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ', 'ğŸŠ'],
['â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'â›°', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾', 'â›°', 'â›°', 'â›°', 'ğŸŒ¾', 'ğŸŒ¾', 'ğŸŒ¾']
]

#global vars for a* search
user_defined_map = [[None for x in range(WIDTH)] for y in range(HEIGHT)]
heuristic = None
heuristic_functions = dict()
path = False

#############
# FUNCTIONS #
#############

#function to show map
def render_map(map):
    for row in map:
        st.html('<div style="text-align: center">'+' '.join(row)+'</div>')



#function to update path
def do_path():
    path = True

with st.form("Map Parameters"):

    #start and finish
    start = st.text_input("Starting Position (comma separated)", "0,0").split(",")

    start_x = int(start[0].strip())
    start_y = int(start[1].strip())
    
    end = st.text_input("End Position (comma separated)", f"{WIDTH-1}, {HEIGHT-1}").split(",")

    end_x = int(end[0].strip())
    end_y = int(end[1].strip())
    
    heuristic = st.selectbox(
        label = 'heuristic',
        options = HEURISTIC_OPTIONS,
        index = 0,
        key = 'heuristic',
        placeholder="Choose an option", 
        disabled=False, 
        label_visibility="visible"
    )
    
    #grid selection
    columns = st.columns(WIDTH)
    for x, col in enumerate(columns):
        with col:
            for y in range(HEIGHT):
                user_defined_map[y][x] = st.selectbox(
                  label = f'({x},{y})', 
                  options = TERRAIN_OPTIONS, 
                  index = TERRAIN_OPTIONS.index(full_world[y][x]), 
                  # format_func=special_internal_function, 
                  key = f'{x}_{y}',
                  on_change = None,
                  help=None, 
                  placeholder="Choose an option", 
                  disabled=False, 
                  label_visibility="visible"
                )
    
    #make the search happen
    submitted = st.form_submit_button('A* Search', on_click = do_path)

st.header('Rendered Map')

render_map(user_defined_map)
